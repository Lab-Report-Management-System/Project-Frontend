(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7609"],{"770c":function(e,t,n){"use strict";n.r(t);var s,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{attrs:{id:"greetings"}},[e._v("你好,")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),n("el-button",{nativeOn:{click:function(t){return t.preventDefault(),e.sendMessage(t)}}},[e._v("发送")]),n("div",{staticClass:"textarea scroll",attrs:{id:"responseContent"}}),n("div",{attrs:{id:"output"}})],1)},a=[],r=(n("ac1f"),n("1276"),"ws://localhost:7979/websocket?userId="),c="",i=2,d=5,u=1,l=3;function f(){return s=new Object,s.userId=g("nick"),window.WebSocket?(c=new WebSocket(r+s.userId),console.log("当前用户是"+s.userId),document.getElementById("greetings").append(decodeURI(decodeURI(s.userId))),c.onmessage=function(e){var t=JSON.parse(e.data);switch(console.log(JSON.stringify(t)),t.code){case i:document.getElementById("output").append(t.msg);break;case d:break;case l:m();break;case u:break}},c.onopen=function(){v()},c.onclose=function(){w()},!0):(alert("您的浏览器不支持WebSocket"),!1)}function g(e){var t=window.location.href,n=t.split("?")[1].split("=")[0],s=t.split("?")[1].split("=")[1];return n===e?decodeURI(decodeURI(s)):null}function m(){var e={code:4};p(JSON.stringify(e))}function p(e){window.WebSocket&&(c.readyState===WebSocket.OPEN||(c.readyState=WebSocket.OPEN),c.send(e))}function v(){var e={code:1e3};e.username=s.userId,p(JSON.stringify(e))}function w(){var e={code:1001};e.username=s.userId,p(JSON.stringify(e))}var k={name:"Socket",data:function(){return{message:""}},mounted:function(){f()},destroyed:function(){w(),location.reload()},methods:{sendMessage:function(){if(""!==this.message&&null!=this.message){var e={code:2};e.username=s.userId,e.msg=this.message,e.sendUserId=s.userId,p(JSON.stringify(e))}else alert("信息不能为空~")}}},b=k,I=n("2877"),S=Object(I["a"])(b,o,a,!1,null,"c49d9752",null);t["default"]=S.exports}}]);