(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8ecf7226"],{"8c97":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",[s("Navbar"),s("el-header",{staticClass:"fontTitle",staticStyle:{"background-position":"center","background-repeat":"no-repeat","background-size":"cover",opacity:"0.8","font-size":"24px"}},[t._v(" 个 人 信 息 ")]),s("el-main",{staticClass:"el-main",staticStyle:{"background-image":"url('http://121.5.175.203:8080/api/File/getfile/background2.jpg')","background-position":"center","background-repeat":"no-repeat","background-size":"cover","z-index":"0",opacity:"1"}},[s("el-form",{ref:"personalData",staticClass:"mainBorder",staticStyle:{background:"rgba(0,0,0,.5)","box-sizing":"border-box","box-shadow":"0 15px 25px rgba(0，0，0, 0.5)","border-radius":"10px"},attrs:{"label-position":"right",model:t.personalData,rules:t.rules,"label-width":"100px"}},[s("el-row",{attrs:{gutter:10}},[s("el-form-item",[s("el-col",{attrs:{span:12,offset:6}},[s("p",{staticClass:"fontNormal"})]),s("el-col",{attrs:{offset:8,span:12}},[s("div",{staticClass:"block"},[s("el-avatar",{attrs:{size:150,src:t.circleUrl,fit:"contain"}})],1)])],1),s("el-row",[s("el-col",{attrs:{span:5,offset:11}},[s("div",{staticClass:"file-upload"},[s("div",{staticClass:"file-upload-text"},[t._v("更新头像")]),s("input",{staticClass:"file-upload-input",attrs:{id:"upfile",name:"upfile",type:"file",accept:"image/*"},on:{change:function(e){return t.getFile(e)}}})])])],1)],1),s("el-row",{attrs:{gutter:10}},[s("el-form-item",[s("el-col",{attrs:{span:2,offset:5}},[s("p",{staticClass:"fontNormal"},[t._v("邮箱:")])]),s("el-col",{attrs:{span:3,offset:0}},[s("p",{staticClass:"fontWrite"},[t._v(" "+t._s(t.personalData.email)+" ")])])],1)],1),s("el-row",{attrs:{gutter:10}},[s("el-form-item",[s("el-col",{attrs:{span:2,offset:5}},[s("p",{staticClass:"fontNormal"},[t._v("昵称:")])]),s("el-col",{attrs:{span:8,offset:0}},[s("el-input",{staticClass:"fontWrite",staticStyle:{"margin-top":"20px"},attrs:{maxlength:"10","show-word-limit":""},model:{value:t.personalData.nickname,callback:function(e){t.$set(t.personalData,"nickname",e)},expression:"personalData.nickname"}})],1)],1)],1),s("el-row",{attrs:{gutter:10}},[s("el-form-item",[s("el-col",{attrs:{span:2,offset:5}},[s("p",{staticClass:"fontNormal",staticStyle:{width:"60px"}},[t._v("学工号:")])]),s("el-col",{attrs:{span:3,offset:0}},[s("p",{staticClass:"fontWrite"},[t._v(" "+t._s(t.personalData.StuNum)+" ")])])],1)],1),s("el-row",{attrs:{gutter:10}},[s("el-form-item",{attrs:{prop:"newNickname"}},[s("el-col",{attrs:{span:2,offset:5}},[s("p",{staticClass:"fontNormal"},[t._v("身份:")])]),s("el-col",{attrs:{span:3,offset:0}},[s("p",{staticClass:"fontWrite"},[t._v(" "+t._s(t.personalData.identify)+" ")])])],1)],1),s("el-row",{attrs:{gutter:10}},[s("el-form-item",[s("el-col",{attrs:{span:2,offset:6}},[s("label",{staticClass:"fontNormal"},[t._v("性别:")])]),s("el-col",{attrs:{span:8,offset:0}},[s("el-radio-group",{model:{value:t.personalData.sex,callback:function(e){t.$set(t.personalData,"sex",e)},expression:"personalData.sex"}},[s("el-radio",{attrs:{label:"male"}},[t._v("男")]),s("el-radio",{attrs:{label:"female"}},[t._v("女")]),s("el-radio",{attrs:{label:"secret"}},[t._v("保密")])],1)],1)],1)],1),s("el-row",{attrs:{gutter:10}},[s("el-form-item",[s("el-col",{attrs:{span:2,offset:6}},[s("label",{staticClass:"fontNormal"},[t._v("密码:")])]),t.isClickPwd?s("el-col",{attrs:{span:3,offset:0}},[s("label",{staticClass:"fontPwd",on:{click:function(e){return t.changePwd()}}},[t._v("取消")])]):s("el-col",{attrs:{span:3,offset:0}},[s("label",{staticClass:"fontPwd",on:{click:function(e){return t.changePwd()}}},[t._v("修改密码")])]),t.isClickPwd?s("el-col",{attrs:{span:3,offset:0}},[s("label",{staticClass:"fontPwd",on:{click:function(e){return t.reset()}}},[t._v("重置密码")])]):t._e()],1)],1),t.isClickPwd?s("el-row",{attrs:{gutter:10}}):t._e(),t.isClickPwd?s("el-row",{attrs:{gutter:10}},[s("el-form-item",[s("el-col",{attrs:{span:4,offset:5}},[s("label",{staticClass:"fontNormal"},[t._v("新密码:")])]),s("el-col",{attrs:{span:8,offset:0}},[s("el-input",{staticClass:"fontWrite",model:{value:t.newPwd,callback:function(e){t.newPwd=e},expression:"newPwd"}})],1)],1)],1):t._e(),t.isClickPwd?s("el-row",{attrs:{gutter:10}},[s("el-form-item",[s("el-col",{attrs:{span:4,offset:5}},[s("label",{staticClass:"fontNormal"},[t._v("请再次密码:")])]),s("el-col",{attrs:{span:8,offset:0}},[s("el-input",{staticClass:"fontWrite",model:{value:t.newPwd2,callback:function(e){t.newPwd2=e},expression:"newPwd2"}})],1),t.newSame?t._e():s("el-col",{attrs:{span:12,offset:5}},[s("el-alert",{staticStyle:{height:"30px"},attrs:{title:"两次输入密码不一致",type:"error"}})],1)],1)],1):t._e(),s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:2,offset:11}},[s("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-check"},on:{click:function(e){return t.confirme()}}},[t._v("确认修改")])],1)],1),s("el-row",{attrs:{gutter:10}})],1)],1)],1)],1)},l=[],o=s("850b"),n=s("c24f"),i={name:"PersonalInfo",components:{Navbar:o["a"]},data:function(){return{isClickPwd:!1,file:"",oldPwd:"",newPwd:"",newPwd2:"",newSame:!0,isSelect:!1,aaa:"contain",circleUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",personalData:{email:"",nickname:"",StuNum:"",password:"",sex:"",identify:""},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}]}}},mounted:function(){},created:function(){var t=this;console.log("yes"),Object(n["b"])().then((function(e){console.log(e),console.log("yes"),t.circleUrl=e.data.userPhoto,t.personalData.email=e.data.userEmail,t.personalData.nickname=e.data.userNickname,t.personalData.StuNum=1953608,t.personalData.sex="male",t.personalData.identify=e.data.roles[0]}))},methods:{changePwd:function(){this.isClickPwd=!this.isClickPwd,console.log(this.isClickPwd),console.log(this.imgAdd1),console.log(this.userName1),console.log(this.isLogIn1)},getFile:function(t){this.file=t.target.files[0],t.preventDefault();var e=new FormData;e.append("file",this.file);var s={headers:{"Content-Type":"multipart/form-data"}};Object(n["e"])(e,s).then((function(t){console.log(t),console.log("yes")})),Object(n["e"])(t).then((function(t){console.log(t),console.log("yes")})),Object(n["e"])(this.file).then((function(t){console.log(t),console.log("yes")})),Object(n["e"])(e).then((function(t){console.log(t),console.log("yes")}))},confirme:function(){var t=this,e=!0;1==this.isClickPwd&&(this.newPwd!=this.newPwd2?this.isCorrect=!1:e=!0),e&&(this.$alert("您的个人信息已经修改成功","修改完成",{confirmButtonText:"确定",callback:function(e){t.$message({type:"success",message:"修改完成!"})}}),this.$axios.post(url,data).then((function(t){console.log(t.data)})),Object(n["d"])(this.personalData.nickname).then((function(t){console.log(t),console.log("yes")})),1==this.isClickPwd&&Object(n["c"])(this.newPwd).then((function(t){console.log(t),console.log("yes")})))},reset:function(){this.pwdSame=!0,this.newSame=!0,this.oldPwd="",this.newPwd="",this.newPwd2=""},log1:function(){console.log(this.imgAdd1),console.log(this.userName1),console.log(this.isLogIn1),console.log(this.email1)}}},r=i,c=(s("9b46"),s("2877")),f=Object(c["a"])(r,a,l,!1,null,"5ddb92bf",null);e["default"]=f.exports},"9a4d":function(t,e,s){},"9b46":function(t,e,s){"use strict";s("9a4d")}}]);